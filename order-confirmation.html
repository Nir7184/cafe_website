<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation - Brew Bliss Café</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
                        url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            margin: 0;
            font-family: 'Poppins', sans-serif;
        }

        .confirmation-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .confirmation-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .confirmation-header h1 {
            color: #8B4513;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .confirmation-header .success-icon {
            color: #4CAF50;
            font-size: 48px;
            margin-bottom: 20px;
        }

        .order-details {
            margin: 30px 0;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .order-details h3 {
            color: #8B4513;
            margin-bottom: 20px;
            font-size: 1.4em;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .detail-label {
            font-weight: 500;
            color: #666;
        }

        .detail-value {
            font-weight: 600;
            color: #333;
        }

        .delivery-info {
            margin: 30px 0;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 12px;
        }

        .delivery-info h3 {
            color: #8B4513;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .delivery-person {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .delivery-person img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .delivery-person-info h4 {
            margin: 0 0 5px 0;
            color: #333;
        }

        .delivery-person-info p {
            margin: 0;
            color: #666;
        }

        .estimated-time {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 8px;
            color: #4CAF50;
        }

        .estimated-time h3 {
            margin: 0 0 10px 0;
            font-size: 1.4em;
        }

        .estimated-time .time {
            font-size: 2em;
            font-weight: 600;
        }

        .back-to-home {
            display: inline-block;
            margin-top: 20px;
            padding: 15px 30px;
            background: #8B4513;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-to-home:hover {
            background: #6B2C0F;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }

        .payment-status {
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 500;
            display: inline-block;
        }

        .payment-status.paid {
            background: #e8f5e9;
            color: #4CAF50;
        }

        .payment-status.pending {
            background: #fff3e0;
            color: #ff9800;
        }

        .order-items {
            margin: 20px 0;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .item-details h4 {
            margin: 0 0 5px 0;
            color: #333;
        }

        .item-meta {
            color: #666;
            font-size: 0.9em;
        }

        .item-total {
            font-weight: 600;
            color: #8B4513;
        }

        .no-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="confirmation-container">
        <div class="confirmation-header">
            <i class="fas fa-check-circle success-icon"></i>
            <h1>Order Confirmed!</h1>
            <p>Thank you for your order. We'll deliver it soon.</p>
        </div>

        <div class="order-details">
            <h3>Order Details</h3>
            <div class="detail-row">
                <span class="detail-label">Order ID</span>
                <span class="detail-value" id="orderId"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Order Date</span>
                <span class="detail-value" id="orderDate"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Payment Method</span>
                <span class="detail-value" id="paymentMethod"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Payment Status</span>
                <span class="detail-value" id="paymentStatus"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Total Amount</span>
                <span class="detail-value">₹<span id="totalAmount"></span></span>
            </div>
        </div>

        <div class="delivery-info">
            <h3>Delivery Information</h3>
            <div class="detail-row">
                <span class="detail-label">Delivery Address</span>
                <span class="detail-value" id="deliveryAddress"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Contact Number</span>
                <span class="detail-value" id="contactNumber"></span>
            </div>
            <div class="delivery-person">
                <div class="no-image"><i class="fas fa-user"></i></div>
                <div class="delivery-person-info">
                    <h4 id="deliveryPersonName">Rahul Kumar</h4>
                    <p id="deliveryPersonPhone">+91 98765 43210</p>
                </div>
            </div>
        </div>

        <div class="estimated-time">
            <h3>Estimated Delivery Time</h3>
            <div class="time" id="deliveryTime"></div>
        </div>

        <div class="order-items">
            <h3>Order Items</h3>
            <div id="orderItems"></div>
        </div>

        <div style="text-align: center;">
            <a href="index.html" class="back-to-home">
                <i class="fas fa-home"></i> Back to Home
            </a>
        </div>
    </div>

    <script>
        // Function to generate random delivery time between 20 and 35 minutes
        function getRandomDeliveryTime() {
            return Math.floor(Math.random() * (35 - 20 + 1)) + 20;
        }

        // Function to format date
        function formatDate(date) {
            return new Date(date).toLocaleString('en-IN', {
                day: 'numeric',
                month: 'long',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Function to generate random Indian delivery person details
        function getRandomDeliveryPerson() {
            const names = [
                { name: "Rajesh Kumar", phone: "+91 98765 43210", image: "https://randomuser.me/api/portraits/men/32.jpg" },
                { name: "Amit Singh", phone: "+91 87654 32109", image: "https://randomuser.me/api/portraits/men/45.jpg" },
                { name: "Suresh Patel", phone: "+91 76543 21098", image: "https://randomuser.me/api/portraits/men/67.jpg" },
                { name: "Vikram Sharma", phone: "+91 65432 10987", image: "https://randomuser.me/api/portraits/men/89.jpg" },
                { name: "Rahul Gupta", phone: "+91 98765 12345", image: "https://randomuser.me/api/portraits/men/23.jpg" },
                { name: "Deepak Verma", phone: "+91 87654 56789", image: "https://randomuser.me/api/portraits/men/56.jpg" },
                { name: "Sanjay Mishra", phone: "+91 76543 67890", image: "https://randomuser.me/api/portraits/men/78.jpg" }
            ];
            
            // Randomly decide if delivery person should have an image (80% chance)
            const hasImage = Math.random() < 0.8;
            const randomPerson = names[Math.floor(Math.random() * names.length)];
            
            return {
                name: randomPerson.name,
                phone: randomPerson.phone,
                image: hasImage ? randomPerson.image : null
            };
        }

        // Function to load order details
        function loadOrderDetails() {
            // Get the latest order from localStorage
            const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
            const latestOrder = orderHistory[orderHistory.length - 1];

            if (!latestOrder) {
                window.location.href = 'index.html';
                return;
            }

            // Set order details
            document.getElementById('orderId').textContent = latestOrder.orderId;
            document.getElementById('orderDate').textContent = formatDate(latestOrder.orderDate);
            document.getElementById('paymentMethod').textContent = latestOrder.paymentMethod;
            document.getElementById('paymentStatus').innerHTML = 
                `<span class="payment-status ${latestOrder.paymentStatus === 'Paid' ? 'paid' : 'pending'}">
                    ${latestOrder.paymentStatus}
                </span>`;
            document.getElementById('totalAmount').textContent = latestOrder.totalAmount;
            document.getElementById('deliveryAddress').textContent = latestOrder.address;
            document.getElementById('contactNumber').textContent = latestOrder.contactNumber;

            // Set delivery time
            const deliveryTime = getRandomDeliveryTime();
            document.getElementById('deliveryTime').textContent = `${deliveryTime} minutes`;

            // Set random delivery person details
            const deliveryPerson = getRandomDeliveryPerson();
            const deliveryPersonDiv = document.querySelector('.delivery-person');
            deliveryPersonDiv.innerHTML = `
                ${deliveryPerson.image ? 
                    `<img src="${deliveryPerson.image}" alt="${deliveryPerson.name}">` :
                    `<div class="no-image"><i class="fas fa-user"></i></div>`
                }
                <div class="delivery-person-info">
                    <h4>${deliveryPerson.name}</h4>
                    <p>${deliveryPerson.phone}</p>
                </div>
            `;

            // Load order items
            const orderItemsDiv = document.getElementById('orderItems');
            orderItemsDiv.innerHTML = '';

            latestOrder.items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'order-item';
                itemDiv.innerHTML = `
                    <div class="item-info">
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <div class="item-meta">
                                <p>Quantity: ${item.quantity || 1}</p>
                            </div>
                        </div>
                    </div>
                    <div class="item-total">
                        ₹${item.price * (item.quantity || 1)}
                    </div>
                `;
                orderItemsDiv.appendChild(itemDiv);
            });

            // Clear cart after successful order
            localStorage.removeItem('cart');
            sessionStorage.removeItem('cart');
        }

        // Load order details when page loads
        document.addEventListener('DOMContentLoaded', loadOrderDetails);
    </script>
</body>
</html> 